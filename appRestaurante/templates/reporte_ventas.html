{% extends "base.html" %}

{% block content %}
<h1>Reporte de Ventas por Plato</h1>

<h2>Resumen General</h2>
<div>
    <p><strong>Total Ingresos:</strong> S/ {{ total_ingresos_general }}</p>
    <p><strong>Total Platos Vendidos:</strong> {{ total_platos_vendidos }}</p>
    <p><strong>Platos Diferentes:</strong> {{ ventas_por_plato|length }}</p>
</div>

<h2>Ventas por Plato</h2>
<table border="1">
    <thead>
        <tr>
            <th>Plato</th>
            <th>Descripción</th>
            <th>Categoría</th>
            <th>Veces Pedido</th>
            <th>Cantidad Vendida</th>
            <th>Total Ingresos</th>
        </tr>
    </thead>
    <tbody>
        {% for venta in ventas_por_plato %}
        <tr>
            <td>{{ venta.id_plato__id_plato }}</td>
            <td>{{ venta.id_plato__descripcion }}</td>
            <td>{{ venta.id_plato__categoria }}</td>
            <td>{{ venta.veces_pedido }}</td>
            <td>{{ venta.total_vendido }}</td>
            <td><strong>S/ {{ venta.total_ingresos }}</strong></td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="6">No hay ventas registradas</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<h2>Ventas por Categoría</h2>
<table border="1">
    <thead>
        <tr>
            <th>Categoría</th>
            <th>Platos Vendidos</th>
            <th>Total Ingresos</th>
        </tr>
    </thead>
    <tbody>
        {% for categoria in ventas_por_categoria %}
        <tr>
            <td>{{ categoria.id_plato__categoria }}</td>
            <td>{{ categoria.total_vendido }}</td>
            <td><strong>S/ {{ categoria.total_ingresos }}</strong></td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="3">No hay ventas por categoría</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}